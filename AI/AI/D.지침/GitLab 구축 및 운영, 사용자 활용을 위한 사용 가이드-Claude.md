# GitLab 가이드 작성을 위한 질문 설계

## 🧠 사용된 사고 공식 분석

이번 답변을 만들기 위해 다음 공식들을 조합했습니다:

### 1. **문제 재정의 알고리즘 (PR)**
- 원래 질문: "AI에게 어떻게 물어야 하나?"
- 재정의: "GitLab의 3가지 영역(구축/운영/활용)별로 **누가, 언제, 어떤 순서로** 가이드를 필요로 하는가?"
- 관점 회전(θ=90°): "가이드를 만드는 것"이 아니라 "가이드를 **사용하는 사람의 여정**"으로 전환

### 2. **다차원 분석 프레임워크 (MDA)**
```
D1 (시간) = 초기 구축 → 안정화 → 확장 → 최적화
D2 (공간) = 단일 서버 → 팀 협업 → 조직 전체 → 멀티 클라우드
D3 (추상) = 인프라 계층 → 플랫폼 계층 → 사용자 계층
D4 (인과) = 요구사항 → 설계 → 구현 → 검증 → 개선
```

### 3. **복잡도 해결 매트릭스 (CS)**
- GitLab의 복잡한 시스템을 **역할별(Role) × 단계별(Stage) × 검증 가능성(Verifiable)**으로 분해
- 각 영역의 상호작용 계수(Ii) 식별: 인프라 ↔ CI/CD ↔ 보안 정책

---

## ✅ [1단계] 사전 브리핑 요약 🧭

### 배경
GitLab 가이드를 만들려는 목적은:
- **구축팀**: 서버 설치부터 초기 설정까지
- **운영팀**: 백업, 모니터링, 업그레이드, 장애 대응
- **사용자팀**: 프로젝트 구조, CI/CD 파이프라인, 협업 워크플로우

### 범위
각 영역마다 AI에게 **단계별로 질문**해야 효과적인 가이드를 얻을 수 있습니다.

---

## ❓ [2단계] 핵심 질문

**Q1**: 각 영역(구축/운영/활용)별로 어떤 **순서**로 질문해야 하나?  
**Q2**: 질문할 때 포함해야 할 **필수 정보**는?  
**Q3**: AI가 **검증 가능한 답변**을 주도록 하려면?

---

## 🎯 [3단계] 답변 - GitLab 가이드 질문 전략

<details open>
<summary><strong>📋 카드형 요약 (클릭하여 펼치기/접기)</strong></summary>

### 💡 3가지 핵심 원칙

| 원칙 | 설명 | 적용 방법 |
|------|------|----------|
| **단계적 질문** | 한 번에 모든 걸 묻지 말고 **Build → Operate → Use** 순서로 | 각 단계 완료 후 다음 질문 |
| **검증 요구** | "어떻게 확인하나요?" 항상 포함 | 설치 후 헬스체크 방법 필수 |
| **실행 가능성** | 복사-붙여넣기로 바로 실행 가능한 코드/명령어 요청 | "샘플 코드 포함" 명시 |

</details>

---

## 🗂️ 영역별 질문 템플릿

### 🏗️ **A. 구축(Infrastructure Setup) 질문 전략**

#### ✅ 1단계: 요구사항 분석
```
💬 AI에게 이렇게 질문하세요:

"GitLab을 설치하려고 합니다. 다음 조건에 맞는 하드웨어 사양과 네트워크 요구사항을 알려주세요:
- 예상 사용자: [100명 / 500명 / 1000명+]
- 동시 접속률: [10% / 30% / 50%]
- 사용 목적: [개발 전용 / CI/CD 포함 / 전사 DevOps]
- 배포 환경: [단일 서버 / 고가용성(HA) / 멀티 리전]

**다음 형식으로 답변해주세요:**
1. 최소/권장 하드웨어 스펙 (CPU/RAM/디스크)
2. 네트워크 포트 및 방화벽 규칙
3. 스토리지 설계 (데이터/백업/로그 분리)
4. 검증 체크리스트 (설치 전 확인사항)"
```

#### ✅ 2단계: 설치 방법 선택
```
💬 질문 예시:

"다음 시나리오에 맞는 GitLab 설치 방법을 비교해주세요:
- 시나리오 A: 소규모 팀(50명), 빠른 구축 필요
- 시나리오 B: 개발/테스트 환경, 컨테이너 기반 선호
- 시나리오 C: 프로덕션 환경, 고가용성 필수

**각 방법에 대해 다음을 포함해주세요:**
1. 설치 방법 (Omnibus / Docker Compose / Kubernetes Helm / Cloud)
2. 장단점 비교표
3. 단계별 설치 스크립트 (복사-붙여넣기 가능)
4. 설치 검증 방법 (서비스 상태 확인 명령어)
5. 일반적인 설치 오류 3가지와 해결 방법"
```

#### ✅ 3단계: 초기 보안 설정
```
💬 질문 예시:

"GitLab 설치 직후 반드시 해야 할 보안 강화 작업을 알려주세요:
- HTTPS/SSL 인증서 설정 (Let's Encrypt 자동화 포함)
- 방화벽 규칙 (UFW/firewalld 예제)
- 초기 관리자 계정 보안 설정
- LDAP/SAML 통합 (선택사항)

**다음 형식으로 제공해주세요:**
1. 각 작업의 실행 명령어 (주석 포함)
2. 설정 파일 위치 및 샘플 설정
3. 적용 후 확인 방법 (curl/openssl 명령어)
4. 트러블슈팅 가이드 (HTTP 502/SSL 오류 등)"
```

---

### ⚙️ **B. 운영(Operations) 질문 전략**

#### ✅ 1단계: 백업/복구 전략
```
💬 질문 예시:

"GitLab의 백업 및 복구 전략을 다음 요구사항에 맞춰 설계해주세요:
- RTO (복구 목표 시간): [1시간 / 4시간 / 24시간]
- RPO (복구 목표 시점): [실시간 / 1시간 / 일일]
- 백업 저장소: [로컬 디스크 / AWS S3 / GCP Cloud Storage]

**다음 내용을 포함해주세요:**
1. 자동 백업 스크립트 (cron 설정 포함)
2. 백업 파일 목록 및 크기 예상치
3. 복구 절차 (단계별 명령어)
4. 복구 테스트 시나리오 (DR 훈련용)
5. 백업 실패 시 알림 설정 (이메일/Slack)"
```

#### ✅ 2단계: 모니터링 및 알림
```
💬 질문 예시:

"GitLab의 핵심 지표를 모니터링하는 시스템을 구성하고 싶습니다:
- 모니터링 도구: Prometheus + Grafana (선호)
- 알림 채널: Slack / 이메일 / PagerDuty

**다음을 제공해주세요:**
1. Prometheus 설정 파일 (gitlab-exporter 연동)
2. Grafana 대시보드 JSON (주요 메트릭 5가지)
   - CPU/메모리 사용률
   - 디스크 I/O
   - HTTP 응답 시간
   - CI/CD 파이프라인 대기 시간
   - 사용자 동시 접속 수
3. 알림 규칙 예제 (임계값 설정)
4. 문제 발생 시 초기 진단 체크리스트"
```

#### ✅ 3단계: 업그레이드 절차
```
💬 질문 예시:

"GitLab을 [현재 버전: 15.x]에서 [목표 버전: 17.x]로 업그레이드하려 합니다:
- 다운타임 허용: [불가 / 최대 30분 / 최대 2시간]
- 설치 방법: [Omnibus / Kubernetes Helm]

**다음 형식으로 가이드를 작성해주세요:**
1. 업그레이드 경로 (중간 버전 필수 여부)
2. 사전 점검 사항 (데이터베이스 마이그레이션 확인)
3. 단계별 업그레이드 명령어
4. 롤백 계획 (업그레이드 실패 시)
5. 업그레이드 후 검증 (gitlab-rake gitlab:check)
6. 주요 변경 사항 및 Breaking Changes"
```

---

### 👥 **C. 사용자 활용(Team Usage) 질문 전략**

#### ✅ 1단계: 프로젝트 구조 설계
```
💬 질문 예시:

"우리 조직에 맞는 GitLab 프로젝트 구조를 설계하고 싶습니다:
- 조직 규모: [10-50명 / 50-200명 / 200명+]
- 팀 구성: [프론트엔드/백엔드 분리 / 기능별 팀 / 제품별 팀]
- 저장소 전략: [Monorepo / Multirepo]

**다음을 포함해주세요:**
1. Group 계층 구조 예시 (조직도 형태)
2. Project 템플릿 (README/CI 파일 포함)
3. 권한 설계 (Developer/Maintainer/Owner 역할 정의)
4. 네이밍 규칙 (프로젝트명/브랜치명)
5. 실제 구성 예시 (3개 팀 기준)"
```

#### ✅ 2단계: Git 워크플로우 및 브랜치 전략
```
💬 질문 예시:

"다음 개발 환경에 맞는 브랜치 전략을 추천해주세요:
- 릴리스 주기: [매일 배포 / 주간 스프린트 / 월간 릴리스]
- 팀 규모: [5명 이하 / 10명 이하 / 20명 이상]
- 환경: [개발/스테이징/프로덕션]

**다음 형식으로 제공해주세요:**
1. 브랜치 전략 비교 (Git Flow / GitHub Flow / GitLab Flow)
2. 선택한 전략의 브랜치 구조 다이어그램
3. Merge Request(MR) 프로세스
   - 코드 리뷰 규칙
   - 승인 정책 (최소 승인자 수)
   - 자동 병합 조건
4. 충돌 해결 가이드
5. 실제 시나리오 예제 (기능 개발 → 배포)"
```

#### ✅ 3단계: CI/CD 파이프라인 작성
```
💬 질문 예시:

"다음 프로젝트를 위한 .gitlab-ci.yml 파일을 작성해주세요:
- 언어/프레임워크: [Python/Django / Java/Spring / Node.js/React]
- 테스트 도구: [pytest / JUnit / Jest]
- 배포 대상: [Docker / Kubernetes / AWS EC2]
- 보안 스캔: [SAST / 컨테이너 스캔 포함 여부]

**다음을 포함해주세요:**
1. 기본 파이프라인 (Build → Test → Deploy)
2. 단계별 복잡도 증가
   - Level 1: Build만
   - Level 2: Build + Test
   - Level 3: Build + Test + Security Scan
   - Level 4: Multi-stage Deployment (staging/production)
3. 환경 변수 및 시크릿 관리 (CI/CD Variables)
4. 파이프라인 실행 결과 예시 (성공/실패 케이스)
5. 최적화 팁 (캐싱/병렬화)
6. 트러블슈팅 (일반적인 오류 3가지)"
```

#### ✅ 4단계: 이슈/에픽 관리
```
💬 질문 예시:

"GitLab Issues와 Epics를 활용한 프로젝트 관리 체계를 만들고 싶습니다:
- 방법론: [Scrum / Kanban / 하이브리드]
- 팀 규모: [소규모(5명) / 중규모(20명) / 대규모(50명+)]

**다음을 제공해주세요:**
1. Issue 템플릿 (버그/기능/개선 각각)
2. Label 분류 체계 (타입/우선순위/상태)
3. Milestone 전략 (스프린트/릴리스 연동)
4. Epic 활용 예시 (큰 기능 분해)
5. 보드 설정 (칸반 보드 워크플로우)
6. 자동화 (Issue → MR → 배포 연동)"
```

---

## 🎨 질문 작성 시 반드시 포함할 요소

### ✅ **체크리스트**

```markdown
- [ ] **컨텍스트**: 우리 환경 (사용자 수, 팀 규모, 인프라)
- [ ] **목표**: 무엇을 달성하고 싶은지 (구축/최적화/문제 해결)
- [ ] **제약사항**: 다운타임, 예산, 기술 스택 제한
- [ ] **출력 형식 지정**:
  - "복사-붙여넣기 가능한 스크립트"
  - "단계별 체크리스트"
  - "비교표 (장단점)"
  - "트러블슈팅 섹션 포함"
- [ ] **검증 요구**: "각 단계 완료 후 확인 방법 포함"
- [ ] **실제 예제**: "샘플 데이터/시나리오 3가지"
```

---

## 🚀 실전 활용 팁

<details>
<summary><strong>💡 고급 질문 기법 (클릭하여 보기)</strong></summary>

### 1️⃣ **점진적 심화 질문**
```
첫 질문: "GitLab Omnibus 설치 기본 절차"
→ AI 답변 후
두 번째 질문: "위 답변에서 HTTPS 설정 부분을 Let's Encrypt 자동 갱신 포함해서 더 자세히"
→ AI 답변 후
세 번째 질문: "이 설정이 Kubernetes 환경에서는 어떻게 달라지나요?"
```

### 2️⃣ **역할 기반 관점 전환**
```
"위 CI/CD 파이프라인을 다음 역할 관점에서 다시 설명해주세요:
- DevOps 엔지니어: 파이프라인 최적화 관점
- 보안 담당자: 취약점 스캔 및 정책 관점
- 개발자: 파이프라인 사용 및 디버깅 관점"
```

### 3️⃣ **시나리오 기반 문제 해결**
```
"다음 상황이 발생했을 때 해결 절차를 알려주세요:
- 상황 1: GitLab이 갑자기 502 Bad Gateway 오류
- 상황 2: CI/CD 파이프라인이 1시간째 'pending' 상태
- 상황 3: 디스크 용량이 90% 초과

각 상황에 대해:
1. 초기 진단 명령어
2. 로그 확인 위치
3. 임시 조치
4. 근본 원인 분석
5. 재발 방지 대책"
```

</details>

---

## 📊 [4단계] 최종 요약

### 🎯 핵심 결론

| 영역 | 질문 순서 | 필수 포함 요소 |
|------|----------|---------------|
| **구축** | 요구사항 → 설치 방법 → 보안 설정 | 하드웨어 스펙, 스크립트, 검증 방법 |
| **운영** | 백업 → 모니터링 → 업그레이드 | 자동화 스크립트, 알림 규칙, 롤백 계획 |
| **활용** | 프로젝트 구조 → Git 워크플로우 → CI/CD | 템플릿, 브랜치 전략, 파이프라인 예제 |

### ✅ 행동 계획 체크리스트

```markdown
- [ ] 1단계: 구축 가이드 질문 (요구사항 분석부터 시작)
- [ ] 2단계: 설치 방법별 상세 가이드 요청
- [ ] 3단계: 운영 자동화 스크립트 수집
- [ ] 4단계: 사용자 시나리오별 워크플로우 정리
- [ ] 5단계: 각 가이드에 트러블슈팅 섹션 추가 요청
- [ ] 6단계: 전체 가이드를 하나의 문서로 통합 요청
```

---

## 📎 질문 템플릿 다운로드

위의 모든 질문 템플릿을 복사해서 사용하시면 됩니다. 각 질문은:
- ✅ **검증 가능**: "확인 방법" 항상 포함
- ✅ **실행 가능**: 복사-붙여넣기 가능한 코드
- ✅ **단계적**: 이전 답변을 기반으로 심화 질문 가능

---

**다음 단계**: 위 질문 중 어떤 영역부터 시작하시겠습니까? 
- A. 구축(Infrastructure)
- B. 운영(Operations)  
- C. 사용자 활용(Team Usage)

선택하시면 해당 영역의 첫 번째 질문으로 바로 시작하겠습니다! 🚀